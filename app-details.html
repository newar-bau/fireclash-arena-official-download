<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>FireClash Arena - Official Download</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèÜ</text></svg>">
    <meta name="description" content="Official download page for the FireClash Arena esports platform. Join daily tournaments for Free Fire, PUBG, and eFootball in Nepal. eSewa supported.">

    <!-- =================================================================== -->
    <!-- == NEW: Meta Tags for Social Media Sharing == -->
    <!-- TODO: Replace 'https://your-live-website-url.com' with your actual website link -->
    <!-- =================================================================== -->
    <meta property="og:title" content="Download FireClash Arena" />
    <meta property="og:description" content="The ultimate esports platform for the Nepali gaming community. Join tournaments for Free Fire, PUBG & eFootball!" />
    <meta property="og:image" content="https://your-live-website-url.com/share.png" />
    <meta property="og:url" content="https://your-live-website-url.com/app-details.html" />
    <meta property="og:type" content="website" />
    <!-- =================================================================== -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display.swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* All CSS remains the same */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: #1a1a1d; color: #f5f5f5; padding: 20px; }
        .container { max-width: 500px; margin: 0 auto; }
        .back-link { display: inline-block; margin-bottom: 20px; color: #ff9800; text-decoration: none; font-weight: 500; }
        .back-link i { margin-right: 5px; }
        .app-header { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
        .app-logo-container { position: relative; width: 80px; height: 80px; flex-shrink: 0; }
        .app-logo { width: 100%; height: 100%; border-radius: 20px; object-fit: cover; }
        .app-info h1 { font-size: 24px; font-weight: 700; }
        .app-info .developer { font-size: 14px; color: #ff9800; }
        .install-button { display: flex; align-items: center; justify-content: center; width: 100%; padding: 14px; font-size: 18px; font-weight: 600; text-decoration: none; border-radius: 12px; border: none; cursor: pointer; gap: 10px; transition: background-color 0.2s ease; margin-bottom: 20px; }
        .install-button.install { background-color: #28a745; color: #ffffff; }
        .install-button.install:hover { background-color: #218838; }
        .install-button.installing { background-color: #6c757d; color: #f0f0f0; cursor: not-allowed; }
        .install-button.open { background-color: #007bff; color: #ffffff; cursor: pointer; }
        /* NEW: Style for Update button */
        .install-button.update { background-color: #ff9800; color: #ffffff; }
        .install-button.update:hover { background-color: #e68900; }

        .install-progress-ring { position: absolute; top: -5px; left: -5px; width: 90px; height: 90px; transform: rotate(-90deg); opacity: 0; transition: opacity 0.3s; }
        .install-progress-ring__circle { stroke: #28a745; stroke-width: 4; fill: transparent; stroke-dasharray: 251.2, 251.2; stroke-dashoffset: 251.2; }
        .app-logo-container.installing .install-progress-ring { opacity: 1; }
        .app-logo-container.installing .install-progress-ring__circle { animation: draw-circle 3s linear forwards; }
        @keyframes draw-circle { to { stroke-dashoffset: 0; } }
        .stats-bar { display: flex; justify-content: space-around; text-align: center; padding: 10px 0; border-top: 1px solid #444; border-bottom: 1px solid #444; }
        .stat-item span { font-size: 16px; font-weight: 600; }
        .stat-item .fa-star { color: #ffc107; }
        .stat-item p { font-size: 12px; color: #ccc; margin-top: 2px; }
        .age-rating { border: 1px solid #ccc; padding: 1px 5px; border-radius: 4px; font-size: 14px; }
        .screenshots { margin-top: 25px; }
        .screenshots h2 { font-size: 20px; margin-bottom: 15px; }
        .gallery { display: flex; overflow-x: auto; gap: 10px; scroll-snap-type: x mandatory; scrollbar-width: none; }
        .gallery::-webkit-scrollbar { display: none; }
        .gallery .screenshot-thumb { height: 220px; border-radius: 12px; scroll-snap-align: start; cursor: pointer; }
        .about { margin-top: 25px; }
        .about h2 { font-size: 20px; margin-bottom: 10px; }
        .about .description { font-size: 14px; line-height: 1.7; color: #ddd; max-height: 85px; overflow: hidden; transition: max-height 0.4s ease-in-out; }
        .about .description.expanded { max-height: 1000px; }
        .about #toggleDescription { display: block; margin-top: 10px; color: #ff9800; font-weight: 600; text-decoration: none; cursor: pointer; }
        footer { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #444; color: #aaa; font-size: 12px; }
        .ss-viewer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .ss-viewer.active { display: flex; }
        .ss-modal { position: relative; width: 90vw; height: 85vh; max-width: 400px; max-height: 800px; overflow: hidden; }
        .ss-viewer-content { display: flex; height: 100%; transition: transform 0.3s ease-in-out; }
        .ss-viewer-content img { width: 100%; height: 100%; object-fit: contain; flex-shrink: 0; }
        .ss-viewer .close-btn { position: absolute; top: 15px; right: 20px; font-size: 40px; color: #fff; cursor: pointer; z-index: 1002; }
        .ss-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.3); color: #fff; border: none; padding: 10px 15px; font-size: 30px; cursor: pointer; z-index: 1001; }
        .ss-nav.prev { left: 10px; }
        .ss-nav.next { right: 10px; }
        @media (max-width: 600px) { .ss-nav { display: none; } }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Store</a>
        <header class="app-header">
            <div class="app-logo-container" id="logoContainer">
                <img src="logo.png" alt="FireClash Arena Logo" class="app-logo">
                <svg class="install-progress-ring"><circle class="install-progress-ring__circle" r="40" cx="45" cy="45"></circle></svg>
            </div>
            <div class="app-info"><h1>FireClash Arena</h1><p class="developer">FCA Studios Nepal</p></div>
        </header>
        <main>
            <!-- Changed initial class to 'install' and will be updated by JS -->
            <button class="install-button install" id="installButton"><i class="fas fa-download"></i><span>Install</span></button>
            <div class="stats-bar">
                <div class="stat-item"><span>4.7 <i class="fas fa-star"></i></span><p>300+ reviews</p></div>
                <div class="stat-item"><span>2k+</span><p>Downloads</p></div>
                <div class="stat-item"><span class="age-rating">12+</span><p>Rated 12+</p></div>
            </div>
            <section class="screenshots">
                <h2>Screenshots</h2>
                <div class="gallery">
                    <img src="ss1.png" alt="Screenshot 1" class="screenshot-thumb">
                    <img src="ss2.png" alt="Screenshot 2" class="screenshot-thumb">
                    <img src="ss3.png" alt="Screenshot 3" class="screenshot-thumb">
                    <img src="ss4.png" alt="Screenshot 4" class="screenshot-thumb">
                </div>
            </section>
            <section class="about">
                <h2>About this app</h2>
                <div class="description" id="appDescription"><p>Welcome to FireClash Arena, the ultimate esports platform built for the Nepali gaming community! Compete, conquer, and get rewarded for your skills in your favorite mobile games.<br><br>Our platform is the top destination for competitive players in Nepal, hosting daily tournaments for today's most popular titles:<ul><li><strong>Free Fire</strong></li><li><strong>PUBG Mobile</strong></li><li><strong>eFootball</strong></li></ul><br>With secure and easy prize withdrawals directly through <strong>eSewa</strong>, getting your winnings has never been simpler or more trustworthy. Join thousands of other players, prove your skills, and start your journey to becoming a champion today!</p></div>
                <a id="toggleDescription">Read More</a>
            </section>
        </main>
        <footer><p>&copy; 2025 FCA Studios Nepal. All Rights Reserved.</p></footer>
    </div>
    <div class="ss-viewer" id="ssViewer">
        <span class="close-btn" id="ssCloseBtn">&times;</span>
        <button class="ss-nav prev" id="ssPrevBtn">&#10094;</button>
        <div class="ss-modal" id="ssModal"><div class="ss-viewer-content" id="ssViewerContent"></div></div>
        <button class="ss-nav next" id="ssNextBtn">&#10095;</button>
    </div>
    <script>
        const installButton = document.getElementById('installButton');
        const buttonText = installButton.querySelector('span');
        const logoContainer = document.getElementById('logoContainer');
        const apkFile = 'FireClash Arena.apk';
        const APP_INSTALLED_KEY = 'fireclashArenaInstalled';

        // Function to update button state
        const updateButtonState = () => {
            if (localStorage.getItem(APP_INSTALLED_KEY) === 'true') {
                installButton.classList.remove('install', 'installing', 'open');
                installButton.classList.add('update');
                buttonText.textContent = 'Update';
                installButton.innerHTML = '<i class="fas fa-sync-alt"></i><span>Update</span>'; // Change icon to refresh/sync
            } else {
                installButton.classList.remove('update', 'installing', 'open');
                installButton.classList.add('install');
                buttonText.textContent = 'Install';
                installButton.innerHTML = '<i class="fas fa-download"></i><span>Install</span>'; // Change icon to download
            }
        };

        // Call updateButtonState on page load
        document.addEventListener('DOMContentLoaded', updateButtonState);

        installButton.addEventListener('click', () => {
            // Always allow download, regardless of button text (Install or Update)
            const link = document.createElement('a');
            link.href = apkFile;
            link.download = apkFile;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            // Set the "installed" flag in localStorage
            localStorage.setItem(APP_INSTALLED_KEY, 'true');

            // Visually indicate installing/updating and then switch to 'Update'
            installButton.classList.remove('install', 'update', 'open');
            installButton.classList.add('installing');
            buttonText.textContent = 'Downloading...';
            logoContainer.classList.add('installing');

            setTimeout(() => {
                logoContainer.classList.remove('installing');
                installButton.classList.remove('installing');
                
                // After download/install simulation, update to 'Update' state
                installButton.classList.add('update');
                buttonText.textContent = 'Update';
                installButton.innerHTML = '<i class="fas fa-sync-alt"></i><span>Update</span>'; // Ensure icon also changes back
            }, 3000); // Simulate download for 3 seconds
        });

        const description = document.getElementById('appDescription');
        const toggler = document.getElementById('toggleDescription');
        toggler.addEventListener('click', (e) => {
            e.preventDefault();
            toggler.textContent = description.classList.toggle('expanded') ? 'Read Less' : 'Read More';
        });

        const ssViewer = document.getElementById('ssViewer');
        const ssModal = document.getElementById('ssModal');
        const ssViewerContent = document.getElementById('ssViewerContent');
        const ssThumbs = document.querySelectorAll('.screenshot-thumb');
        let currentSsIndex = 0;
        let touchStartX = 0;

        const showScreenshot = (index) => {
            ssViewerContent.style.transform = `translateX(-${index * 100}%)`;
            currentSsIndex = index;
        };

        ssThumbs.forEach((thumb, index) => {
            const img = document.createElement('img');
            img.src = thumb.src;
            ssViewerContent.appendChild(img);
            thumb.addEventListener('click', () => {
                ssViewer.classList.add('active');
                showScreenshot(index);
            });
        });

        const closeViewer = () => ssViewer.classList.remove('active');
        document.getElementById('ssCloseBtn').addEventListener('click', closeViewer);
        ssViewer.addEventListener('click', (e) => { if(e.target === ssViewer) closeViewer(); });

        const nextScreenshot = () => showScreenshot(Math.min(ssThumbs.length - 1, currentSsIndex + 1));
        const prevScreenshot = () => showScreenshot(Math.max(0, currentSsIndex - 1));

        document.getElementById('ssNextBtn').addEventListener('click', nextScreenshot);
        document.getElementById('ssPrevBtn').addEventListener('click', prevScreenshot);

        ssModal.addEventListener('touchstart', e => touchStartX = e.touches[0].clientX);
        ssModal.addEventListener('touchend', e => {
            const touchEndX = e.changedTouches[0].clientX;
            if (touchStartX - touchEndX > 50) { nextScreenshot(); }
            else if (touchEndX - touchStartX > 50) { prevScreenshot(); }
        });
    </script>
</body>
</html>
